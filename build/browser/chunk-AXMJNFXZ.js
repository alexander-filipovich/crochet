import{D as i,L as x,M as d,y as p,z as a}from"./chunk-LINDN5SP.js";var v={};function _(s,e){let t=0;for(let o=0;o<e;o++)t=t*31+s[o].uid>>>0;return v[t]||f(s,t)}var c=0;function f(s,e){let t={},o=0;c||(c=d());for(let r=0;r<c;r++){let l=r<s.length?s[r]:i.EMPTY.source;t[o++]=l.source,t[o++]=l.style}let n=new x(t);return v[e]=n,n}var u=class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let o=p.get().createCanvas();o.width=e,o.height=t;let n=o.getContext("2d");return{canvas:o,context:n}}getOptimalCanvasAndContext(e,t,o=1){e=Math.ceil(e*o-1e-6),t=Math.ceil(t*o-1e-6),e=a(e),t=a(t);let n=(e<<17)+(t<<1);this._canvasPool[n]||(this._canvasPool[n]=[]);let r=this._canvasPool[n].pop();return r||(r=this._createCanvasAndContext(e,t)),r}returnCanvasAndContext(e){let{width:t,height:o}=e.canvas,n=(t<<17)+(o<<1);this._canvasPool[n].push(e)}clear(){this._canvasPool={}}},m=new u;export{_ as a,m as b};
